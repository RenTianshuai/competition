# 题目六 股票集合竞价的撮合

### 【题目描述】

股票集合竞价是指在股票每个交易日上午9：15—9：25，由投资者按照自己所能接受的心理价格自由地进行买卖申请。

集合定价由电脑交易处理系统对全部申报按照价格优先、时间优先的原则排序。

 

 

### 【试题要求】】

开发一款软件模拟实现股票集合竞价的撮合

启动后监听Socket 7701端口，接受测试服务器发送的Socket流，Socket的输入为本地的测试输入文件全路径文件名，要求程序读取该文件中的所有行，该文件表示当天的卖出买入记录。程序通过撮合这些交易后打印出所有的成交记录（记录不分先后顺序）, 并输出保存至本地文件，最后将结果文件的全路经文件名发送回测试服务器。

 

Socket报文格式：报文固定前6位表示后续报文的字节码长度，不足6位时前补0。根据长度获取完整报文，【输入】

例如，为了传输测试文件路径/home/jike/intdiv/input.txt，完整的Socket输入为“000027/home/jike/intdiv/input.txt”（不含引号）

 

### 【输入】

文件格式参考输入样例。 

输入文件的每行表示一条卖出或买入记录，各字段使用,分割，行使用\r\n进行分割

a) 交易时间（4位表示) 0900 - 0925

b) 卖出/买入标志(1位数字） 1:卖出 2:买入

c) 客户号(10位数字)

d) 股票代码(6位数字）

e）每股价格(金额格式，精确到小数后3位)

f) 股份（数字类型，100的整数倍)

 

### 【输出】

输出所有成交记录，每行表示一条成交记录，字段之间使用,份额，行使用\r\n进行分割

a) 股票代码(6位数字）

b) 卖出客户号(10位数字)

c) 买入客户号(10位数字)

d）成交价格(金额格式，精确到小数后3位)

f) 成交股份（数字类型，100的整数倍)

 

### 【输入样例】

0900,1,0000000001,600001,10.000,2000

......

 

### 【输出样例】

600001,0000000001,000000002,10.000,2000

.....

 

最终计算完毕后，结果文件被保存在本地磁盘上，并且将结果文件的文件全路经通过Socket写回测试服务器， Socket的格式同输入的规范，前6位表示报文长度。 

 

### 【基线时间】

3小时

 

### 【评分标准】

正确性：70%，性能：30%

正确性验证：使用一个文件包含100000条股票委托记录用于计算，评判正确性和耗时时间，输出结果只判断正确性，不判断输出顺序。

  1) 以100分为满分，输出错误每处扣15分，扣完为止

\2. 性能验证

  1) 正确性得分为0不参与性能验证

  2）以100条数据1分钟完成为基准时间，计80分

  3) 每增加5秒减3分，总时间超过3分钟 不计分

  4) 每减少5秒加3分，上不封顶

 